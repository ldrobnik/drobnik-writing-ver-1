{"version":3,"file":"bs-daterangepicker-container.component.js","sourceRoot":"","sources":["../../../../.tmp/datepicker/themes/bs/bs-daterangepicker-container.component.ts"],"names":[],"mappings":"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","sourcesContent":["import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { BsDatepickerStore } from '../../reducer/bs-datepicker.store';\nimport { BsDatepickerActions } from '../../reducer/bs-datepicker.actions';\nimport {\n  BsNavigationEvent, DatepickerRenderOptions, DayHoverEvent, DayViewModel,\n  MonthViewModel\n} from '../../models/index';\nimport 'rxjs/add/operator/filter';\n\n@Component({\n  selector: 'bs-daterangepicker-container',\n  providers: [BsDatepickerStore],\n  template: `\n    <bs-datepicker-view\n      *ngIf=\"months && options\"\n      [months]=\"months\"\n      [options]=\"options\"\n      (onNavigate)=\"navigateTo($event)\"\n      (onHover)=\"hoverHandler($event)\"\n      (onSelect)=\"selectHandler($event)\"\n    ></bs-datepicker-view>\n  `,\n  host: {\n    '(click)': '_stopPropagation($event)',\n    style: 'position: absolute; display: block;'\n  }\n})\nexport class BsDaterangepickerContainerComponent implements OnInit {\n  @Input()\n  set value(value: Date[]) {\n    this._bsDatepickerStore.dispatch(this._actions.selectRange(value || []));\n  }\n\n  @Output() valueChange = new EventEmitter<Date[]>();\n\n  months: MonthViewModel[];\n  options: DatepickerRenderOptions;\n  _rangeStack: Date[] = [];\n\n  constructor(private _bsDatepickerStore: BsDatepickerStore,\n              private _actions: BsDatepickerActions) {\n    // data binding state <--> model\n    this._bsDatepickerStore.select(state => state.flaggedMonths)\n      .filter(months => !!months)\n      .subscribe(months => this.months = months);\n\n    this._bsDatepickerStore.select(state => state.renderOptions)\n      .filter(options => !!options)\n      .subscribe(options => this.options = options);\n\n    // set render options\n    this._bsDatepickerStore.dispatch(this._actions.renderOptions({\n      displayMonths: 2,\n      showWeekNumbers: true\n    }));\n\n    // on selected date change\n    this._bsDatepickerStore.select(state => state.selectedRange)\n      .subscribe(date => this.valueChange.emit(date));\n\n    // TODO: extract effects\n    // calculate month model on view model change\n    this._bsDatepickerStore\n      .select(state => state.viewDate)\n      .subscribe(viewDate =>\n        this._bsDatepickerStore.dispatch(this._actions.calculate(viewDate)));\n\n    // format calendar values on month model change\n    this._bsDatepickerStore\n      .select(state => state.monthsModel)\n      .filter(monthModel => !!monthModel)\n      .subscribe(month =>\n        this._bsDatepickerStore.dispatch(this._actions.format()));\n\n    // flag day values\n    this._bsDatepickerStore\n      .select(state => state.formattedMonths)\n      .filter(month => !!month)\n      .subscribe(month =>\n        this._bsDatepickerStore.dispatch(this._actions.flag()));\n\n    // flag day values\n    this._bsDatepickerStore.select(state => state.selectedRange)\n      .filter(selectedRange => !!selectedRange)\n      .subscribe(selectedRange =>\n        this._bsDatepickerStore.dispatch(this._actions.flag()));\n\n    // on hover\n    this._bsDatepickerStore.select(state => state.hoveredDate)\n      .filter(hoveredDate => !!hoveredDate)\n      .subscribe(hoveredDate =>\n        this._bsDatepickerStore.dispatch(this._actions.flag()));\n  }\n\n  ngOnInit() {\n    // this._bsDatepickerStore.dispatch(this._actions.init());\n  }\n\n  navigateTo(event: BsNavigationEvent): void {\n    this._bsDatepickerStore.dispatch(this._actions.navigateStep(event.step));\n  }\n\n  hoverHandler(event: DayHoverEvent): void {\n    if (event.day.isOtherMonth) {\n      return;\n    }\n    this._bsDatepickerStore.dispatch(this._actions.hover(event));\n    event.day.isHovered = event.isHovered;\n  }\n\n  selectHandler(day: DayViewModel): void {\n    if (day.isOtherMonth) {\n      return;\n    }\n\n    if (this._rangeStack.length === 1) {\n      if (day.date >= this._rangeStack[0]) {\n        this._rangeStack = [this._rangeStack[0], day.date];\n      } else {\n        this._rangeStack = [day.date];\n      }\n    }\n\n    if (this._rangeStack.length === 0) {\n      this._rangeStack = [day.date];\n    }\n\n    this._bsDatepickerStore.dispatch(this._actions.selectRange(this._rangeStack));\n\n    if (this._rangeStack.length === 2) {\n      this._rangeStack = [];\n    }\n  }\n\n  _stopPropagation(event: any): void {\n    event.stopPropagation();\n  }\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}